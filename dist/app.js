!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(3)},,,function(e,t){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),i=Object.assign({antialias:!1,depthTest:!1,mousemove:!1,autosize:!0,side:"front",vertex:"\n          precision highp float;\n  \n          attribute vec4 a_position;\n          attribute vec4 a_color;\n  \n          uniform float u_time;\n          uniform vec2 u_resolution;\n          uniform vec2 u_mousemove;\n          uniform mat4 u_projection;\n  \n          varying vec4 v_color;\n  \n          void main() {\n  \n            gl_Position = u_projection * a_position;\n            gl_PointSize = (10.0 / gl_Position.w) * 100.0;\n  \n            v_color = a_color;\n  \n          }",fragment:"\n          precision highp float;\n  \n          uniform sampler2D u_texture;\n          uniform int u_hasTexture;\n  \n          varying vec4 v_color;\n  \n          void main() {\n  \n            if ( u_hasTexture == 1 ) {\n  \n              gl_FragColor = v_color * texture2D(u_texture, gl_PointCoord);\n  \n            } else {\n  \n              gl_FragColor = v_color;\n  \n            }\n  \n          }",uniforms:{},buffers:{},camera:{},texture:null,onUpdate:function(){},onResize:function(){}},i);var a=Object.assign({time:{type:"float",value:0},hasTexture:{type:"int",value:0},resolution:{type:"vec2",value:[0,0]},mousemove:{type:"vec2",value:[0,0]},projection:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},i.uniforms),o=Object.assign({position:{size:3,data:[]},color:{size:4,data:[]}},i.buffers),s=Object.assign({fov:60,near:1,far:1e4,aspect:1,z:100,perspective:!0},i.camera),u=document.createElement("canvas"),f=u.getContext("webgl",{antialias:i.antialias});return!!f&&(this.count=0,this.gl=f,this.canvas=u,this.camera=s,this.holder=t,this.onUpdate=i.onUpdate,this.onResize=i.onResize,this.data={},t.appendChild(u),this.createProgram(i.vertex,i.fragment),this.createBuffers(o),this.createUniforms(a),this.updateBuffers(),this.updateUniforms(),this.createTexture(i.texture),f.enable(f.BLEND),f.enable(f.CULL_FACE),f.blendFunc(f.SRC_ALPHA,f.ONE),f[i.depthTest?"enable":"disable"](f.DEPTH_TEST),i.autosize&&window.addEventListener("resize",function(e){return r.resize(e)},!1),i.mousemove&&window.addEventListener("mousemove",function(e){return r.mousemove(e)},!1),this.resize(),this.update=this.update.bind(this),this.time={start:performance.now(),old:performance.now()},void this.update())}return i(e,[{key:"mousemove",value:function(e){var t=e.pageX/this.width*2-1,r=e.pageY/this.height*2-1;this.uniforms.mousemove=[t,r]}},{key:"resize",value:function(e){var t=this.holder,r=this.canvas,n=this.gl,i=this.width=t.offsetWidth,a=this.height=t.offsetHeight,o=this.aspect=i/a,s=this.dpi=devicePixelRatio;r.width=i*s,r.height=a*s,r.style.width=i+"px",r.style.height=a+"px",n.viewport(0,0,i*s,a*s),n.clearColor(0,0,0,0),this.uniforms.resolution=[i,a],this.uniforms.projection=this.setProjection(o),this.onResize(i,a,s)}},{key:"setProjection",value:function(e){var t=this.camera;if(t.perspective){t.aspect=e;var r=t.fov*(Math.PI/180),n=Math.tan(.5*Math.PI-.5*r),i=1/(t.near-t.far),a=[n/t.aspect,0,0,0,0,n,0,0,0,0,(t.near+t.far)*i,-1,0,0,t.near*t.far*i*2,0];return a[14]+=t.z,a[15]+=t.z,a}return[2/this.width,0,0,0,0,-2/this.height,0,0,0,0,1,0,-1,1,0,1]}},{key:"createShader",value:function(e,t){var r=this.gl,n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),r.getShaderParameter(n,r.COMPILE_STATUS)?n:(console.log(r.getShaderInfoLog(n)),void r.deleteShader(n))}},{key:"createProgram",value:function(e,t){var r=this.gl,n=this.createShader(r.VERTEX_SHADER,e),i=this.createShader(r.FRAGMENT_SHADER,t),a=r.createProgram();r.attachShader(a,n),r.attachShader(a,i),r.linkProgram(a),r.getProgramParameter(a,r.LINK_STATUS)?(r.useProgram(a),this.program=a):(console.log(r.getProgramInfoLog(a)),r.deleteProgram(a))}},{key:"createUniforms",value:function(e){var t=this,r=this.gl,n=this.data.uniforms=e,i=this.uniforms={};Object.keys(n).forEach(function(e){var a=n[e];a.location=r.getUniformLocation(t.program,"u_"+e),Object.defineProperty(i,e,{set:function(r){n[e].value=r,t.setUniform(e,r)},get:function(){return n[e].value}})})}},{key:"setUniform",value:function(e,t){var n=this.gl,i=this.data.uniforms[e];switch(i.value=t,i.type){case"int":n.uniform1i(i.location,t);break;case"float":n.uniform1f(i.location,t);break;case"vec2":n.uniform2f.apply(n,[i.location].concat(r(t)));break;case"vec3":n.uniform3f.apply(n,[i.location].concat(r(t)));break;case"vec4":n.uniform4f.apply(n,[i.location].concat(r(t)));break;case"mat2":n.uniformMatrix2fv(i.location,!1,t);break;case"mat3":n.uniformMatrix3fv(i.location,!1,t);break;case"mat4":n.uniformMatrix4fv(i.location,!1,t)}}},{key:"updateUniforms",value:function(){var e=this,t=(this.gl,this.data.uniforms);Object.keys(t).forEach(function(r){var n=t[r];e.uniforms[r]=n.value})}},{key:"createBuffers",value:function(e){var t=this,r=(this.gl,this.data.buffers=e),n=this.buffers={};Object.keys(r).forEach(function(e){var i=r[e];i.buffer=t.createBuffer("a_"+e,i.size),Object.defineProperty(n,e,{set:function(n){r[e].data=n,t.setBuffer(e,n),"position"==e&&(t.count=r.position.data.length/3)},get:function(){return r[e].data}})})}},{key:"createBuffer",value:function(e,t){var r=this.gl,n=this.program,i=r.getAttribLocation(n,e),a=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,a),r.enableVertexAttribArray(i),r.vertexAttribPointer(i,t,r.FLOAT,!1,0,0),a}},{key:"setBuffer",value:function(e,t){var r=this.gl,n=this.data.buffers;(null!=e||r.bindBuffer(r.ARRAY_BUFFER,null))&&(r.bindBuffer(r.ARRAY_BUFFER,n[e].buffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t),r.STATIC_DRAW))}},{key:"updateBuffers",value:function(){var e=(this.gl,this.buffers);Object.keys(e).forEach(function(t){return e[t]=buffer.data}),this.setBuffer(null)}},{key:"createTexture",value:function(e){var t=this.gl,r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([0,0,0,0])),this.texture=r,e&&(this.uniforms.hasTexture=1,this.loadTexture(e))}},{key:"loadTexture",value:function(e){var t=this.gl,r=this.texture,n=new Image;n.onload=function(){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},n.src=e}},{key:"update",value:function(){var e=this.gl,t=performance.now(),r=(t-this.time.start)/5e3,n=t-this.time.old;this.time.old=t,this.uniforms.time=r,this.count>0&&(e.clear(e.COLORBUFFERBIT),e.drawArrays(e.POINTS,0,this.count)),this.onUpdate(n),requestAnimationFrame(this.update)}}]),e}(),o=2.5;new a(document.querySelector(".waves"),{texture:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAb1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8v0wLRAAAAJHRSTlMAC/goGvDhmwcExrVjWzrm29TRqqSKenRXVklANSIUE8mRkGpv+HOfAAABCElEQVQ4y4VT13LDMAwLrUHteO+R9f/fWMfO6dLaPeKVEECRxOULWsEGpS9nULDwia2Y+ALqUNbAWeg775zv+sA4/FFRMxt8U2FZFCVWjR/YrH4/H9sarclSKdPMWKzb8VsEeHB3m0shkhVCyNzeXeAQ9Xl4opEieX2QCGnwGbj6GMyjw9t1K0fK9YZunPXeAGsfJtYjwzxaBnozGGorYz0ypK2HzQSYx1y8DgSRo2ewOiyh2QWOEk1Y9OrQV0a8TiBM1a8eMHWYnRMy7CZ4t1CmyRkhSUvP3gRXyHOCLBxNoC3IJv//ZrJ/kxxUHPUB+6jJZZHrpg6GOjnqaOmzp4NDR48OLxn/H27SRQ08S0ZJAAAAAElFTkSuQmCC",uniforms:{size:{type:"float",value:o},field:{type:"vec3",value:[0,0,0]},speed:{type:"float",value:5}},vertex:"\n      #define M_PI 3.1415926535897932384626433832795\n  \n      precision highp float;\n  \n      attribute vec4 a_position;\n      attribute vec4 a_color;\n  \n      uniform float u_time;\n      uniform float u_size;\n      uniform float u_speed;\n      uniform vec3 u_field;\n      uniform mat4 u_projection;\n  \n      varying vec4 v_color;\n  \n      void main() {\n  \n        vec3 pos = a_position.xyz;\n  \n        pos.y += (\n          cos(pos.x / u_field.x * M_PI * 8.0 + u_time * u_speed) +\n          sin(pos.z / u_field.z * M_PI * 8.0 + u_time * u_speed)\n        ) * u_field.y;\n  \n        gl_Position = u_projection * vec4( pos.xyz, a_position.w );\n        gl_PointSize = ( u_size / gl_Position.w ) * 100.0;\n  \n        v_color = a_color;\n  \n      }",fragment:"\n      precision highp float;\n  \n      uniform sampler2D u_texture;\n  \n      varying vec4 v_color;\n  \n      void main() {\n  \n        gl_FragColor = v_color * texture2D(u_texture, gl_PointCoord);\n  \n      }",onResize:function(e,t,r){for(var n=[],i=[],a=400*(e/t),s=400,u=3,f=5,c=0;c<a;c+=f)for(var l=0;l<s;l+=f)n.push(-a/2+c,-30,-s/2+l),i.push(0,1-c/a*1,.5+c/a*.5,l/s);this.uniforms.field=[a,u,s],this.buffers.position=n,this.buffers.color=i,this.uniforms.size=t/400*o*r}});t.ShaderProgram=a}]);